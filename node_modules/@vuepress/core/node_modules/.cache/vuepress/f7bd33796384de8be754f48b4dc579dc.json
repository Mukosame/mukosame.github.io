{"remainingRequest":"/opt/myblog/vuepress-theme-reco-master/zdblog/node_modules/babel-loader/lib/index.js??ref--3-1!/opt/myblog/vuepress-theme-reco-master/zdblog/node_modules/core-js/modules/web.url.js","dependencies":[{"path":"/opt/myblog/vuepress-theme-reco-master/zdblog/node_modules/core-js/modules/web.url.js","mtime":1603041181476},{"path":"/opt/myblog/vuepress-theme-reco-master/zdblog/node_modules/cache-loader/dist/cjs.js","mtime":1603041438982},{"path":"/opt/myblog/vuepress-theme-reco-master/zdblog/node_modules/babel-loader/lib/index.js","mtime":1603041438713}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOyAvLyBUT0RPOiBpbiBjb3JlLWpzQDQsIG1vdmUgL21vZHVsZXMvIGRlcGVuZGVuY2llcyB0byBwdWJsaWMgZW50cmllcyBmb3IgYmV0dGVyIG9wdGltaXphdGlvbiBieSB0b29scyBsaWtlIGBwcmVzZXQtZW52YAoKcmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3InKTsKCnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpOwoKdmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7Cgp2YXIgVVNFX05BVElWRV9VUkwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmF0aXZlLXVybCcpOwoKdmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTsKCnZhciBkZWZpbmVQcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcycpOwoKdmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lJyk7Cgp2YXIgYW5JbnN0YW5jZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1pbnN0YW5jZScpOwoKdmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTsKCnZhciBhc3NpZ24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWFzc2lnbicpOwoKdmFyIGFycmF5RnJvbSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1mcm9tJyk7Cgp2YXIgY29kZUF0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy1tdWx0aWJ5dGUnKS5jb2RlQXQ7Cgp2YXIgdG9BU0NJSSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctcHVueWNvZGUtdG8tYXNjaWknKTsKCnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtdG8tc3RyaW5nLXRhZycpOwoKdmFyIFVSTFNlYXJjaFBhcmFtc01vZHVsZSA9IHJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zJyk7Cgp2YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpOwoKdmFyIE5hdGl2ZVVSTCA9IGdsb2JhbC5VUkw7CnZhciBVUkxTZWFyY2hQYXJhbXMgPSBVUkxTZWFyY2hQYXJhbXNNb2R1bGUuVVJMU2VhcmNoUGFyYW1zOwp2YXIgZ2V0SW50ZXJuYWxTZWFyY2hQYXJhbXNTdGF0ZSA9IFVSTFNlYXJjaFBhcmFtc01vZHVsZS5nZXRTdGF0ZTsKdmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDsKdmFyIGdldEludGVybmFsVVJMU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcignVVJMJyk7CnZhciBmbG9vciA9IE1hdGguZmxvb3I7CnZhciBwb3cgPSBNYXRoLnBvdzsKdmFyIElOVkFMSURfQVVUSE9SSVRZID0gJ0ludmFsaWQgYXV0aG9yaXR5JzsKdmFyIElOVkFMSURfU0NIRU1FID0gJ0ludmFsaWQgc2NoZW1lJzsKdmFyIElOVkFMSURfSE9TVCA9ICdJbnZhbGlkIGhvc3QnOwp2YXIgSU5WQUxJRF9QT1JUID0gJ0ludmFsaWQgcG9ydCc7CnZhciBBTFBIQSA9IC9bQS1aYS16XS87CnZhciBBTFBIQU5VTUVSSUMgPSAvW1xkKy0uQS1aYS16XS87CnZhciBESUdJVCA9IC9cZC87CnZhciBIRVhfU1RBUlQgPSAvXigweHwwWCkvOwp2YXIgT0NUID0gL15bMC03XSskLzsKdmFyIERFQyA9IC9eXGQrJC87CnZhciBIRVggPSAvXltcZEEtRmEtZl0rJC87IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4Cgp2YXIgRk9SQklEREVOX0hPU1RfQ09ERV9QT0lOVCA9IC9bXHUwMDAwXHUwMDA5XHUwMDBBXHUwMDBEICMlLzo/QFtcXF1dLzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXgKCnZhciBGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UX0VYQ0xVRElOR19QRVJDRU5UID0gL1tcdTAwMDBcdTAwMDlcdTAwMEFcdTAwMEQgIy86P0BbXFxdXS87IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4Cgp2YXIgTEVBRElOR19BTkRfVFJBSUxJTkdfQzBfQ09OVFJPTF9PUl9TUEFDRSA9IC9eW1x1MDAwMC1cdTAwMUYgXSt8W1x1MDAwMC1cdTAwMUYgXSskL2c7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4Cgp2YXIgVEFCX0FORF9ORVdfTElORSA9IC9bXHUwMDA5XHUwMDBBXHUwMDBEXS9nOwp2YXIgRU9GOwoKdmFyIHBhcnNlSG9zdCA9IGZ1bmN0aW9uICh1cmwsIGlucHV0KSB7CiAgdmFyIHJlc3VsdCwgY29kZVBvaW50cywgaW5kZXg7CgogIGlmIChpbnB1dC5jaGFyQXQoMCkgPT0gJ1snKSB7CiAgICBpZiAoaW5wdXQuY2hhckF0KGlucHV0Lmxlbmd0aCAtIDEpICE9ICddJykgcmV0dXJuIElOVkFMSURfSE9TVDsKICAgIHJlc3VsdCA9IHBhcnNlSVB2NihpbnB1dC5zbGljZSgxLCAtMSkpOwogICAgaWYgKCFyZXN1bHQpIHJldHVybiBJTlZBTElEX0hPU1Q7CiAgICB1cmwuaG9zdCA9IHJlc3VsdDsgLy8gb3BhcXVlIGhvc3QKICB9IGVsc2UgaWYgKCFpc1NwZWNpYWwodXJsKSkgewogICAgaWYgKEZPUkJJRERFTl9IT1NUX0NPREVfUE9JTlRfRVhDTFVESU5HX1BFUkNFTlQudGVzdChpbnB1dCkpIHJldHVybiBJTlZBTElEX0hPU1Q7CiAgICByZXN1bHQgPSAnJzsKICAgIGNvZGVQb2ludHMgPSBhcnJheUZyb20oaW5wdXQpOwoKICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvZGVQb2ludHMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIHJlc3VsdCArPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludHNbaW5kZXhdLCBDMENvbnRyb2xQZXJjZW50RW5jb2RlU2V0KTsKICAgIH0KCiAgICB1cmwuaG9zdCA9IHJlc3VsdDsKICB9IGVsc2UgewogICAgaW5wdXQgPSB0b0FTQ0lJKGlucHV0KTsKICAgIGlmIChGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5ULnRlc3QoaW5wdXQpKSByZXR1cm4gSU5WQUxJRF9IT1NUOwogICAgcmVzdWx0ID0gcGFyc2VJUHY0KGlucHV0KTsKICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHJldHVybiBJTlZBTElEX0hPU1Q7CiAgICB1cmwuaG9zdCA9IHJlc3VsdDsKICB9Cn07Cgp2YXIgcGFyc2VJUHY0ID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgdmFyIHBhcnRzID0gaW5wdXQuc3BsaXQoJy4nKTsKICB2YXIgcGFydHNMZW5ndGgsIG51bWJlcnMsIGluZGV4LCBwYXJ0LCByYWRpeCwgbnVtYmVyLCBpcHY0OwoKICBpZiAocGFydHMubGVuZ3RoICYmIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdID09ICcnKSB7CiAgICBwYXJ0cy5wb3AoKTsKICB9CgogIHBhcnRzTGVuZ3RoID0gcGFydHMubGVuZ3RoOwogIGlmIChwYXJ0c0xlbmd0aCA+IDQpIHJldHVybiBpbnB1dDsKICBudW1iZXJzID0gW107CgogIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHBhcnRzTGVuZ3RoOyBpbmRleCsrKSB7CiAgICBwYXJ0ID0gcGFydHNbaW5kZXhdOwogICAgaWYgKHBhcnQgPT0gJycpIHJldHVybiBpbnB1dDsKICAgIHJhZGl4ID0gMTA7CgogICAgaWYgKHBhcnQubGVuZ3RoID4gMSAmJiBwYXJ0LmNoYXJBdCgwKSA9PSAnMCcpIHsKICAgICAgcmFkaXggPSBIRVhfU1RBUlQudGVzdChwYXJ0KSA/IDE2IDogODsKICAgICAgcGFydCA9IHBhcnQuc2xpY2UocmFkaXggPT0gOCA/IDEgOiAyKTsKICAgIH0KCiAgICBpZiAocGFydCA9PT0gJycpIHsKICAgICAgbnVtYmVyID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGlmICghKHJhZGl4ID09IDEwID8gREVDIDogcmFkaXggPT0gOCA/IE9DVCA6IEhFWCkudGVzdChwYXJ0KSkgcmV0dXJuIGlucHV0OwogICAgICBudW1iZXIgPSBwYXJzZUludChwYXJ0LCByYWRpeCk7CiAgICB9CgogICAgbnVtYmVycy5wdXNoKG51bWJlcik7CiAgfQoKICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBwYXJ0c0xlbmd0aDsgaW5kZXgrKykgewogICAgbnVtYmVyID0gbnVtYmVyc1tpbmRleF07CgogICAgaWYgKGluZGV4ID09IHBhcnRzTGVuZ3RoIC0gMSkgewogICAgICBpZiAobnVtYmVyID49IHBvdygyNTYsIDUgLSBwYXJ0c0xlbmd0aCkpIHJldHVybiBudWxsOwogICAgfSBlbHNlIGlmIChudW1iZXIgPiAyNTUpIHJldHVybiBudWxsOwogIH0KCiAgaXB2NCA9IG51bWJlcnMucG9wKCk7CgogIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IG51bWJlcnMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICBpcHY0ICs9IG51bWJlcnNbaW5kZXhdICogcG93KDI1NiwgMyAtIGluZGV4KTsKICB9CgogIHJldHVybiBpcHY0Owp9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHMKCgp2YXIgcGFyc2VJUHY2ID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgdmFyIGFkZHJlc3MgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CiAgdmFyIHBpZWNlSW5kZXggPSAwOwogIHZhciBjb21wcmVzcyA9IG51bGw7CiAgdmFyIHBvaW50ZXIgPSAwOwogIHZhciB2YWx1ZSwgbGVuZ3RoLCBudW1iZXJzU2VlbiwgaXB2NFBpZWNlLCBudW1iZXIsIHN3YXBzLCBzd2FwOwoKICB2YXIgY2hhciA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBpbnB1dC5jaGFyQXQocG9pbnRlcik7CiAgfTsKCiAgaWYgKGNoYXIoKSA9PSAnOicpIHsKICAgIGlmIChpbnB1dC5jaGFyQXQoMSkgIT0gJzonKSByZXR1cm47CiAgICBwb2ludGVyICs9IDI7CiAgICBwaWVjZUluZGV4Kys7CiAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7CiAgfQoKICB3aGlsZSAoY2hhcigpKSB7CiAgICBpZiAocGllY2VJbmRleCA9PSA4KSByZXR1cm47CgogICAgaWYgKGNoYXIoKSA9PSAnOicpIHsKICAgICAgaWYgKGNvbXByZXNzICE9PSBudWxsKSByZXR1cm47CiAgICAgIHBvaW50ZXIrKzsKICAgICAgcGllY2VJbmRleCsrOwogICAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHZhbHVlID0gbGVuZ3RoID0gMDsKCiAgICB3aGlsZSAobGVuZ3RoIDwgNCAmJiBIRVgudGVzdChjaGFyKCkpKSB7CiAgICAgIHZhbHVlID0gdmFsdWUgKiAxNiArIHBhcnNlSW50KGNoYXIoKSwgMTYpOwogICAgICBwb2ludGVyKys7CiAgICAgIGxlbmd0aCsrOwogICAgfQoKICAgIGlmIChjaGFyKCkgPT0gJy4nKSB7CiAgICAgIGlmIChsZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICBwb2ludGVyIC09IGxlbmd0aDsKICAgICAgaWYgKHBpZWNlSW5kZXggPiA2KSByZXR1cm47CiAgICAgIG51bWJlcnNTZWVuID0gMDsKCiAgICAgIHdoaWxlIChjaGFyKCkpIHsKICAgICAgICBpcHY0UGllY2UgPSBudWxsOwoKICAgICAgICBpZiAobnVtYmVyc1NlZW4gPiAwKSB7CiAgICAgICAgICBpZiAoY2hhcigpID09ICcuJyAmJiBudW1iZXJzU2VlbiA8IDQpIHBvaW50ZXIrKztlbHNlIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghRElHSVQudGVzdChjaGFyKCkpKSByZXR1cm47CgogICAgICAgIHdoaWxlIChESUdJVC50ZXN0KGNoYXIoKSkpIHsKICAgICAgICAgIG51bWJlciA9IHBhcnNlSW50KGNoYXIoKSwgMTApOwogICAgICAgICAgaWYgKGlwdjRQaWVjZSA9PT0gbnVsbCkgaXB2NFBpZWNlID0gbnVtYmVyO2Vsc2UgaWYgKGlwdjRQaWVjZSA9PSAwKSByZXR1cm47ZWxzZSBpcHY0UGllY2UgPSBpcHY0UGllY2UgKiAxMCArIG51bWJlcjsKICAgICAgICAgIGlmIChpcHY0UGllY2UgPiAyNTUpIHJldHVybjsKICAgICAgICAgIHBvaW50ZXIrKzsKICAgICAgICB9CgogICAgICAgIGFkZHJlc3NbcGllY2VJbmRleF0gPSBhZGRyZXNzW3BpZWNlSW5kZXhdICogMjU2ICsgaXB2NFBpZWNlOwogICAgICAgIG51bWJlcnNTZWVuKys7CiAgICAgICAgaWYgKG51bWJlcnNTZWVuID09IDIgfHwgbnVtYmVyc1NlZW4gPT0gNCkgcGllY2VJbmRleCsrOwogICAgICB9CgogICAgICBpZiAobnVtYmVyc1NlZW4gIT0gNCkgcmV0dXJuOwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZiAoY2hhcigpID09ICc6JykgewogICAgICBwb2ludGVyKys7CiAgICAgIGlmICghY2hhcigpKSByZXR1cm47CiAgICB9IGVsc2UgaWYgKGNoYXIoKSkgcmV0dXJuOwoKICAgIGFkZHJlc3NbcGllY2VJbmRleCsrXSA9IHZhbHVlOwogIH0KCiAgaWYgKGNvbXByZXNzICE9PSBudWxsKSB7CiAgICBzd2FwcyA9IHBpZWNlSW5kZXggLSBjb21wcmVzczsKICAgIHBpZWNlSW5kZXggPSA3OwoKICAgIHdoaWxlIChwaWVjZUluZGV4ICE9IDAgJiYgc3dhcHMgPiAwKSB7CiAgICAgIHN3YXAgPSBhZGRyZXNzW3BpZWNlSW5kZXhdOwogICAgICBhZGRyZXNzW3BpZWNlSW5kZXgtLV0gPSBhZGRyZXNzW2NvbXByZXNzICsgc3dhcHMgLSAxXTsKICAgICAgYWRkcmVzc1tjb21wcmVzcyArIC0tc3dhcHNdID0gc3dhcDsKICAgIH0KICB9IGVsc2UgaWYgKHBpZWNlSW5kZXggIT0gOCkgcmV0dXJuOwoKICByZXR1cm4gYWRkcmVzczsKfTsKCnZhciBmaW5kTG9uZ2VzdFplcm9TZXF1ZW5jZSA9IGZ1bmN0aW9uIChpcHY2KSB7CiAgdmFyIG1heEluZGV4ID0gbnVsbDsKICB2YXIgbWF4TGVuZ3RoID0gMTsKICB2YXIgY3VyclN0YXJ0ID0gbnVsbDsKICB2YXIgY3Vyckxlbmd0aCA9IDA7CiAgdmFyIGluZGV4ID0gMDsKCiAgZm9yICg7IGluZGV4IDwgODsgaW5kZXgrKykgewogICAgaWYgKGlwdjZbaW5kZXhdICE9PSAwKSB7CiAgICAgIGlmIChjdXJyTGVuZ3RoID4gbWF4TGVuZ3RoKSB7CiAgICAgICAgbWF4SW5kZXggPSBjdXJyU3RhcnQ7CiAgICAgICAgbWF4TGVuZ3RoID0gY3Vyckxlbmd0aDsKICAgICAgfQoKICAgICAgY3VyclN0YXJ0ID0gbnVsbDsKICAgICAgY3Vyckxlbmd0aCA9IDA7CiAgICB9IGVsc2UgewogICAgICBpZiAoY3VyclN0YXJ0ID09PSBudWxsKSBjdXJyU3RhcnQgPSBpbmRleDsKICAgICAgKytjdXJyTGVuZ3RoOwogICAgfQogIH0KCiAgaWYgKGN1cnJMZW5ndGggPiBtYXhMZW5ndGgpIHsKICAgIG1heEluZGV4ID0gY3VyclN0YXJ0OwogICAgbWF4TGVuZ3RoID0gY3Vyckxlbmd0aDsKICB9CgogIHJldHVybiBtYXhJbmRleDsKfTsKCnZhciBzZXJpYWxpemVIb3N0ID0gZnVuY3Rpb24gKGhvc3QpIHsKICB2YXIgcmVzdWx0LCBpbmRleCwgY29tcHJlc3MsIGlnbm9yZTA7IC8vIGlwdjQKCiAgaWYgKHR5cGVvZiBob3N0ID09ICdudW1iZXInKSB7CiAgICByZXN1bHQgPSBbXTsKCiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7CiAgICAgIHJlc3VsdC51bnNoaWZ0KGhvc3QgJSAyNTYpOwogICAgICBob3N0ID0gZmxvb3IoaG9zdCAvIDI1Nik7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdC5qb2luKCcuJyk7IC8vIGlwdjYKICB9IGVsc2UgaWYgKHR5cGVvZiBob3N0ID09ICdvYmplY3QnKSB7CiAgICByZXN1bHQgPSAnJzsKICAgIGNvbXByZXNzID0gZmluZExvbmdlc3RaZXJvU2VxdWVuY2UoaG9zdCk7CgogICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgODsgaW5kZXgrKykgewogICAgICBpZiAoaWdub3JlMCAmJiBob3N0W2luZGV4XSA9PT0gMCkgY29udGludWU7CiAgICAgIGlmIChpZ25vcmUwKSBpZ25vcmUwID0gZmFsc2U7CgogICAgICBpZiAoY29tcHJlc3MgPT09IGluZGV4KSB7CiAgICAgICAgcmVzdWx0ICs9IGluZGV4ID8gJzonIDogJzo6JzsKICAgICAgICBpZ25vcmUwID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgKz0gaG9zdFtpbmRleF0udG9TdHJpbmcoMTYpOwogICAgICAgIGlmIChpbmRleCA8IDcpIHJlc3VsdCArPSAnOic7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJ1snICsgcmVzdWx0ICsgJ10nOwogIH0KCiAgcmV0dXJuIGhvc3Q7Cn07Cgp2YXIgQzBDb250cm9sUGVyY2VudEVuY29kZVNldCA9IHt9Owp2YXIgZnJhZ21lbnRQZXJjZW50RW5jb2RlU2V0ID0gYXNzaWduKHt9LCBDMENvbnRyb2xQZXJjZW50RW5jb2RlU2V0LCB7CiAgJyAnOiAxLAogICciJzogMSwKICAnPCc6IDEsCiAgJz4nOiAxLAogICdgJzogMQp9KTsKdmFyIHBhdGhQZXJjZW50RW5jb2RlU2V0ID0gYXNzaWduKHt9LCBmcmFnbWVudFBlcmNlbnRFbmNvZGVTZXQsIHsKICAnIyc6IDEsCiAgJz8nOiAxLAogICd7JzogMSwKICAnfSc6IDEKfSk7CnZhciB1c2VyaW5mb1BlcmNlbnRFbmNvZGVTZXQgPSBhc3NpZ24oe30sIHBhdGhQZXJjZW50RW5jb2RlU2V0LCB7CiAgJy8nOiAxLAogICc6JzogMSwKICAnOyc6IDEsCiAgJz0nOiAxLAogICdAJzogMSwKICAnWyc6IDEsCiAgJ1xcJzogMSwKICAnXSc6IDEsCiAgJ14nOiAxLAogICd8JzogMQp9KTsKCnZhciBwZXJjZW50RW5jb2RlID0gZnVuY3Rpb24gKGNoYXIsIHNldCkgewogIHZhciBjb2RlID0gY29kZUF0KGNoYXIsIDApOwogIHJldHVybiBjb2RlID4gMHgyMCAmJiBjb2RlIDwgMHg3RiAmJiAhaGFzKHNldCwgY2hhcikgPyBjaGFyIDogZW5jb2RlVVJJQ29tcG9uZW50KGNoYXIpOwp9OwoKdmFyIHNwZWNpYWxTY2hlbWVzID0gewogIGZ0cDogMjEsCiAgZmlsZTogbnVsbCwKICBodHRwOiA4MCwKICBodHRwczogNDQzLAogIHdzOiA4MCwKICB3c3M6IDQ0Mwp9OwoKdmFyIGlzU3BlY2lhbCA9IGZ1bmN0aW9uICh1cmwpIHsKICByZXR1cm4gaGFzKHNwZWNpYWxTY2hlbWVzLCB1cmwuc2NoZW1lKTsKfTsKCnZhciBpbmNsdWRlc0NyZWRlbnRpYWxzID0gZnVuY3Rpb24gKHVybCkgewogIHJldHVybiB1cmwudXNlcm5hbWUgIT0gJycgfHwgdXJsLnBhc3N3b3JkICE9ICcnOwp9OwoKdmFyIGNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCA9IGZ1bmN0aW9uICh1cmwpIHsKICByZXR1cm4gIXVybC5ob3N0IHx8IHVybC5jYW5ub3RCZUFCYXNlVVJMIHx8IHVybC5zY2hlbWUgPT0gJ2ZpbGUnOwp9OwoKdmFyIGlzV2luZG93c0RyaXZlTGV0dGVyID0gZnVuY3Rpb24gKHN0cmluZywgbm9ybWFsaXplZCkgewogIHZhciBzZWNvbmQ7CiAgcmV0dXJuIHN0cmluZy5sZW5ndGggPT0gMiAmJiBBTFBIQS50ZXN0KHN0cmluZy5jaGFyQXQoMCkpICYmICgoc2Vjb25kID0gc3RyaW5nLmNoYXJBdCgxKSkgPT0gJzonIHx8ICFub3JtYWxpemVkICYmIHNlY29uZCA9PSAnfCcpOwp9OwoKdmFyIHN0YXJ0c1dpdGhXaW5kb3dzRHJpdmVMZXR0ZXIgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CiAgdmFyIHRoaXJkOwogIHJldHVybiBzdHJpbmcubGVuZ3RoID4gMSAmJiBpc1dpbmRvd3NEcml2ZUxldHRlcihzdHJpbmcuc2xpY2UoMCwgMikpICYmIChzdHJpbmcubGVuZ3RoID09IDIgfHwgKHRoaXJkID0gc3RyaW5nLmNoYXJBdCgyKSkgPT09ICcvJyB8fCB0aGlyZCA9PT0gJ1xcJyB8fCB0aGlyZCA9PT0gJz8nIHx8IHRoaXJkID09PSAnIycpOwp9OwoKdmFyIHNob3J0ZW5VUkxzUGF0aCA9IGZ1bmN0aW9uICh1cmwpIHsKICB2YXIgcGF0aCA9IHVybC5wYXRoOwogIHZhciBwYXRoU2l6ZSA9IHBhdGgubGVuZ3RoOwoKICBpZiAocGF0aFNpemUgJiYgKHVybC5zY2hlbWUgIT0gJ2ZpbGUnIHx8IHBhdGhTaXplICE9IDEgfHwgIWlzV2luZG93c0RyaXZlTGV0dGVyKHBhdGhbMF0sIHRydWUpKSkgewogICAgcGF0aC5wb3AoKTsKICB9Cn07Cgp2YXIgaXNTaW5nbGVEb3QgPSBmdW5jdGlvbiAoc2VnbWVudCkgewogIHJldHVybiBzZWdtZW50ID09PSAnLicgfHwgc2VnbWVudC50b0xvd2VyQ2FzZSgpID09PSAnJTJlJzsKfTsKCnZhciBpc0RvdWJsZURvdCA9IGZ1bmN0aW9uIChzZWdtZW50KSB7CiAgc2VnbWVudCA9IHNlZ21lbnQudG9Mb3dlckNhc2UoKTsKICByZXR1cm4gc2VnbWVudCA9PT0gJy4uJyB8fCBzZWdtZW50ID09PSAnJTJlLicgfHwgc2VnbWVudCA9PT0gJy4lMmUnIHx8IHNlZ21lbnQgPT09ICclMmUlMmUnOwp9OyAvLyBTdGF0ZXM6CgoKdmFyIFNDSEVNRV9TVEFSVCA9IHt9Owp2YXIgU0NIRU1FID0ge307CnZhciBOT19TQ0hFTUUgPSB7fTsKdmFyIFNQRUNJQUxfUkVMQVRJVkVfT1JfQVVUSE9SSVRZID0ge307CnZhciBQQVRIX09SX0FVVEhPUklUWSA9IHt9Owp2YXIgUkVMQVRJVkUgPSB7fTsKdmFyIFJFTEFUSVZFX1NMQVNIID0ge307CnZhciBTUEVDSUFMX0FVVEhPUklUWV9TTEFTSEVTID0ge307CnZhciBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUyA9IHt9Owp2YXIgQVVUSE9SSVRZID0ge307CnZhciBIT1NUID0ge307CnZhciBIT1NUTkFNRSA9IHt9Owp2YXIgUE9SVCA9IHt9Owp2YXIgRklMRSA9IHt9Owp2YXIgRklMRV9TTEFTSCA9IHt9Owp2YXIgRklMRV9IT1NUID0ge307CnZhciBQQVRIX1NUQVJUID0ge307CnZhciBQQVRIID0ge307CnZhciBDQU5OT1RfQkVfQV9CQVNFX1VSTF9QQVRIID0ge307CnZhciBRVUVSWSA9IHt9Owp2YXIgRlJBR01FTlQgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1zdGF0ZW1lbnRzCgp2YXIgcGFyc2VVUkwgPSBmdW5jdGlvbiAodXJsLCBpbnB1dCwgc3RhdGVPdmVycmlkZSwgYmFzZSkgewogIHZhciBzdGF0ZSA9IHN0YXRlT3ZlcnJpZGUgfHwgU0NIRU1FX1NUQVJUOwogIHZhciBwb2ludGVyID0gMDsKICB2YXIgYnVmZmVyID0gJyc7CiAgdmFyIHNlZW5BdCA9IGZhbHNlOwogIHZhciBzZWVuQnJhY2tldCA9IGZhbHNlOwogIHZhciBzZWVuUGFzc3dvcmRUb2tlbiA9IGZhbHNlOwogIHZhciBjb2RlUG9pbnRzLCBjaGFyLCBidWZmZXJDb2RlUG9pbnRzLCBmYWlsdXJlOwoKICBpZiAoIXN0YXRlT3ZlcnJpZGUpIHsKICAgIHVybC5zY2hlbWUgPSAnJzsKICAgIHVybC51c2VybmFtZSA9ICcnOwogICAgdXJsLnBhc3N3b3JkID0gJyc7CiAgICB1cmwuaG9zdCA9IG51bGw7CiAgICB1cmwucG9ydCA9IG51bGw7CiAgICB1cmwucGF0aCA9IFtdOwogICAgdXJsLnF1ZXJ5ID0gbnVsbDsKICAgIHVybC5mcmFnbWVudCA9IG51bGw7CiAgICB1cmwuY2Fubm90QmVBQmFzZVVSTCA9IGZhbHNlOwogICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKExFQURJTkdfQU5EX1RSQUlMSU5HX0MwX0NPTlRST0xfT1JfU1BBQ0UsICcnKTsKICB9CgogIGlucHV0ID0gaW5wdXQucmVwbGFjZShUQUJfQU5EX05FV19MSU5FLCAnJyk7CiAgY29kZVBvaW50cyA9IGFycmF5RnJvbShpbnB1dCk7CgogIHdoaWxlIChwb2ludGVyIDw9IGNvZGVQb2ludHMubGVuZ3RoKSB7CiAgICBjaGFyID0gY29kZVBvaW50c1twb2ludGVyXTsKCiAgICBzd2l0Y2ggKHN0YXRlKSB7CiAgICAgIGNhc2UgU0NIRU1FX1NUQVJUOgogICAgICAgIGlmIChjaGFyICYmIEFMUEhBLnRlc3QoY2hhcikpIHsKICAgICAgICAgIGJ1ZmZlciArPSBjaGFyLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICBzdGF0ZSA9IFNDSEVNRTsKICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlKSB7CiAgICAgICAgICBzdGF0ZSA9IE5PX1NDSEVNRTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSByZXR1cm4gSU5WQUxJRF9TQ0hFTUU7CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTQ0hFTUU6CiAgICAgICAgaWYgKGNoYXIgJiYgKEFMUEhBTlVNRVJJQy50ZXN0KGNoYXIpIHx8IGNoYXIgPT0gJysnIHx8IGNoYXIgPT0gJy0nIHx8IGNoYXIgPT0gJy4nKSkgewogICAgICAgICAgYnVmZmVyICs9IGNoYXIudG9Mb3dlckNhc2UoKTsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJzonKSB7CiAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSAmJiAoaXNTcGVjaWFsKHVybCkgIT0gaGFzKHNwZWNpYWxTY2hlbWVzLCBidWZmZXIpIHx8IGJ1ZmZlciA9PSAnZmlsZScgJiYgKGluY2x1ZGVzQ3JlZGVudGlhbHModXJsKSB8fCB1cmwucG9ydCAhPT0gbnVsbCkgfHwgdXJsLnNjaGVtZSA9PSAnZmlsZScgJiYgIXVybC5ob3N0KSkgcmV0dXJuOwogICAgICAgICAgdXJsLnNjaGVtZSA9IGJ1ZmZlcjsKCiAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSkgewogICAgICAgICAgICBpZiAoaXNTcGVjaWFsKHVybCkgJiYgc3BlY2lhbFNjaGVtZXNbdXJsLnNjaGVtZV0gPT0gdXJsLnBvcnQpIHVybC5wb3J0ID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGJ1ZmZlciA9ICcnOwoKICAgICAgICAgIGlmICh1cmwuc2NoZW1lID09ICdmaWxlJykgewogICAgICAgICAgICBzdGF0ZSA9IEZJTEU7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzU3BlY2lhbCh1cmwpICYmIGJhc2UgJiYgYmFzZS5zY2hlbWUgPT0gdXJsLnNjaGVtZSkgewogICAgICAgICAgICBzdGF0ZSA9IFNQRUNJQUxfUkVMQVRJVkVfT1JfQVVUSE9SSVRZOwogICAgICAgICAgfSBlbHNlIGlmIChpc1NwZWNpYWwodXJsKSkgewogICAgICAgICAgICBzdGF0ZSA9IFNQRUNJQUxfQVVUSE9SSVRZX1NMQVNIRVM7CiAgICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludHNbcG9pbnRlciArIDFdID09ICcvJykgewogICAgICAgICAgICBzdGF0ZSA9IFBBVEhfT1JfQVVUSE9SSVRZOwogICAgICAgICAgICBwb2ludGVyKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cmwuY2Fubm90QmVBQmFzZVVSTCA9IHRydWU7CiAgICAgICAgICAgIHVybC5wYXRoLnB1c2goJycpOwogICAgICAgICAgICBzdGF0ZSA9IENBTk5PVF9CRV9BX0JBU0VfVVJMX1BBVEg7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghc3RhdGVPdmVycmlkZSkgewogICAgICAgICAgYnVmZmVyID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IE5PX1NDSEVNRTsKICAgICAgICAgIHBvaW50ZXIgPSAwOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIHJldHVybiBJTlZBTElEX1NDSEVNRTsKCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIE5PX1NDSEVNRToKICAgICAgICBpZiAoIWJhc2UgfHwgYmFzZS5jYW5ub3RCZUFCYXNlVVJMICYmIGNoYXIgIT0gJyMnKSByZXR1cm4gSU5WQUxJRF9TQ0hFTUU7CgogICAgICAgIGlmIChiYXNlLmNhbm5vdEJlQUJhc2VVUkwgJiYgY2hhciA9PSAnIycpIHsKICAgICAgICAgIHVybC5zY2hlbWUgPSBiYXNlLnNjaGVtZTsKICAgICAgICAgIHVybC5wYXRoID0gYmFzZS5wYXRoLnNsaWNlKCk7CiAgICAgICAgICB1cmwucXVlcnkgPSBiYXNlLnF1ZXJ5OwogICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICB1cmwuY2Fubm90QmVBQmFzZVVSTCA9IHRydWU7CiAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBzdGF0ZSA9IGJhc2Uuc2NoZW1lID09ICdmaWxlJyA/IEZJTEUgOiBSRUxBVElWRTsKICAgICAgICBjb250aW51ZTsKCiAgICAgIGNhc2UgU1BFQ0lBTF9SRUxBVElWRV9PUl9BVVRIT1JJVFk6CiAgICAgICAgaWYgKGNoYXIgPT0gJy8nICYmIGNvZGVQb2ludHNbcG9pbnRlciArIDFdID09ICcvJykgewogICAgICAgICAgc3RhdGUgPSBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUzsKICAgICAgICAgIHBvaW50ZXIrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUgPSBSRUxBVElWRTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFBBVEhfT1JfQVVUSE9SSVRZOgogICAgICAgIGlmIChjaGFyID09ICcvJykgewogICAgICAgICAgc3RhdGUgPSBBVVRIT1JJVFk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUgPSBQQVRIOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgY2FzZSBSRUxBVElWRToKICAgICAgICB1cmwuc2NoZW1lID0gYmFzZS5zY2hlbWU7CgogICAgICAgIGlmIChjaGFyID09IEVPRikgewogICAgICAgICAgdXJsLnVzZXJuYW1lID0gYmFzZS51c2VybmFtZTsKICAgICAgICAgIHVybC5wYXNzd29yZCA9IGJhc2UucGFzc3dvcmQ7CiAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgIHVybC5wb3J0ID0gYmFzZS5wb3J0OwogICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgIHVybC5xdWVyeSA9IGJhc2UucXVlcnk7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICcvJyB8fCBjaGFyID09ICdcXCcgJiYgaXNTcGVjaWFsKHVybCkpIHsKICAgICAgICAgIHN0YXRlID0gUkVMQVRJVkVfU0xBU0g7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICc/JykgewogICAgICAgICAgdXJsLnVzZXJuYW1lID0gYmFzZS51c2VybmFtZTsKICAgICAgICAgIHVybC5wYXNzd29yZCA9IGJhc2UucGFzc3dvcmQ7CiAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgIHVybC5wb3J0ID0gYmFzZS5wb3J0OwogICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgIHVybC5xdWVyeSA9ICcnOwogICAgICAgICAgc3RhdGUgPSBRVUVSWTsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJyMnKSB7CiAgICAgICAgICB1cmwudXNlcm5hbWUgPSBiYXNlLnVzZXJuYW1lOwogICAgICAgICAgdXJsLnBhc3N3b3JkID0gYmFzZS5wYXNzd29yZDsKICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgdXJsLnBvcnQgPSBiYXNlLnBvcnQ7CiAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTsKICAgICAgICAgIHVybC5mcmFnbWVudCA9ICcnOwogICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXJsLnVzZXJuYW1lID0gYmFzZS51c2VybmFtZTsKICAgICAgICAgIHVybC5wYXNzd29yZCA9IGJhc2UucGFzc3dvcmQ7CiAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgIHVybC5wb3J0ID0gYmFzZS5wb3J0OwogICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgIHVybC5wYXRoLnBvcCgpOwogICAgICAgICAgc3RhdGUgPSBQQVRIOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgUkVMQVRJVkVfU0xBU0g6CiAgICAgICAgaWYgKGlzU3BlY2lhbCh1cmwpICYmIChjaGFyID09ICcvJyB8fCBjaGFyID09ICdcXCcpKSB7CiAgICAgICAgICBzdGF0ZSA9IFNQRUNJQUxfQVVUSE9SSVRZX0lHTk9SRV9TTEFTSEVTOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnLycpIHsKICAgICAgICAgIHN0YXRlID0gQVVUSE9SSVRZOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1cmwudXNlcm5hbWUgPSBiYXNlLnVzZXJuYW1lOwogICAgICAgICAgdXJsLnBhc3N3b3JkID0gYmFzZS5wYXNzd29yZDsKICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgdXJsLnBvcnQgPSBiYXNlLnBvcnQ7CiAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTUEVDSUFMX0FVVEhPUklUWV9TTEFTSEVTOgogICAgICAgIHN0YXRlID0gU1BFQ0lBTF9BVVRIT1JJVFlfSUdOT1JFX1NMQVNIRVM7CiAgICAgICAgaWYgKGNoYXIgIT0gJy8nIHx8IGJ1ZmZlci5jaGFyQXQocG9pbnRlciArIDEpICE9ICcvJykgY29udGludWU7CiAgICAgICAgcG9pbnRlcisrOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUzoKICAgICAgICBpZiAoY2hhciAhPSAnLycgJiYgY2hhciAhPSAnXFwnKSB7CiAgICAgICAgICBzdGF0ZSA9IEFVVEhPUklUWTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIEFVVEhPUklUWToKICAgICAgICBpZiAoY2hhciA9PSAnQCcpIHsKICAgICAgICAgIGlmIChzZWVuQXQpIGJ1ZmZlciA9ICclNDAnICsgYnVmZmVyOwogICAgICAgICAgc2VlbkF0ID0gdHJ1ZTsKICAgICAgICAgIGJ1ZmZlckNvZGVQb2ludHMgPSBhcnJheUZyb20oYnVmZmVyKTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlckNvZGVQb2ludHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IGJ1ZmZlckNvZGVQb2ludHNbaV07CgogICAgICAgICAgICBpZiAoY29kZVBvaW50ID09ICc6JyAmJiAhc2VlblBhc3N3b3JkVG9rZW4pIHsKICAgICAgICAgICAgICBzZWVuUGFzc3dvcmRUb2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBlbmNvZGVkQ29kZVBvaW50cyA9IHBlcmNlbnRFbmNvZGUoY29kZVBvaW50LCB1c2VyaW5mb1BlcmNlbnRFbmNvZGVTZXQpOwogICAgICAgICAgICBpZiAoc2VlblBhc3N3b3JkVG9rZW4pIHVybC5wYXNzd29yZCArPSBlbmNvZGVkQ29kZVBvaW50cztlbHNlIHVybC51c2VybmFtZSArPSBlbmNvZGVkQ29kZVBvaW50czsKICAgICAgICAgIH0KCiAgICAgICAgICBidWZmZXIgPSAnJzsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gRU9GIHx8IGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnIHx8IGNoYXIgPT0gJ1xcJyAmJiBpc1NwZWNpYWwodXJsKSkgewogICAgICAgICAgaWYgKHNlZW5BdCAmJiBidWZmZXIgPT0gJycpIHJldHVybiBJTlZBTElEX0FVVEhPUklUWTsKICAgICAgICAgIHBvaW50ZXIgLT0gYXJyYXlGcm9tKGJ1ZmZlcikubGVuZ3RoICsgMTsKICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgICAgc3RhdGUgPSBIT1NUOwogICAgICAgIH0gZWxzZSBidWZmZXIgKz0gY2hhcjsKCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIEhPU1Q6CiAgICAgIGNhc2UgSE9TVE5BTUU6CiAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUgJiYgdXJsLnNjaGVtZSA9PSAnZmlsZScpIHsKICAgICAgICAgIHN0YXRlID0gRklMRV9IT1NUOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICc6JyAmJiAhc2VlbkJyYWNrZXQpIHsKICAgICAgICAgIGlmIChidWZmZXIgPT0gJycpIHJldHVybiBJTlZBTElEX0hPU1Q7CiAgICAgICAgICBmYWlsdXJlID0gcGFyc2VIb3N0KHVybCwgYnVmZmVyKTsKICAgICAgICAgIGlmIChmYWlsdXJlKSByZXR1cm4gZmFpbHVyZTsKICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgICAgc3RhdGUgPSBQT1JUOwogICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUgPT0gSE9TVE5BTUUpIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gRU9GIHx8IGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnIHx8IGNoYXIgPT0gJ1xcJyAmJiBpc1NwZWNpYWwodXJsKSkgewogICAgICAgICAgaWYgKGlzU3BlY2lhbCh1cmwpICYmIGJ1ZmZlciA9PSAnJykgcmV0dXJuIElOVkFMSURfSE9TVDsKICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlICYmIGJ1ZmZlciA9PSAnJyAmJiAoaW5jbHVkZXNDcmVkZW50aWFscyh1cmwpIHx8IHVybC5wb3J0ICE9PSBudWxsKSkgcmV0dXJuOwogICAgICAgICAgZmFpbHVyZSA9IHBhcnNlSG9zdCh1cmwsIGJ1ZmZlcik7CiAgICAgICAgICBpZiAoZmFpbHVyZSkgcmV0dXJuIGZhaWx1cmU7CiAgICAgICAgICBidWZmZXIgPSAnJzsKICAgICAgICAgIHN0YXRlID0gUEFUSF9TVEFSVDsKICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSByZXR1cm47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGNoYXIgPT0gJ1snKSBzZWVuQnJhY2tldCA9IHRydWU7ZWxzZSBpZiAoY2hhciA9PSAnXScpIHNlZW5CcmFja2V0ID0gZmFsc2U7CiAgICAgICAgICBidWZmZXIgKz0gY2hhcjsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBQT1JUOgogICAgICAgIGlmIChESUdJVC50ZXN0KGNoYXIpKSB7CiAgICAgICAgICBidWZmZXIgKz0gY2hhcjsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gRU9GIHx8IGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnIHx8IGNoYXIgPT0gJ1xcJyAmJiBpc1NwZWNpYWwodXJsKSB8fCBzdGF0ZU92ZXJyaWRlKSB7CiAgICAgICAgICBpZiAoYnVmZmVyICE9ICcnKSB7CiAgICAgICAgICAgIHZhciBwb3J0ID0gcGFyc2VJbnQoYnVmZmVyLCAxMCk7CiAgICAgICAgICAgIGlmIChwb3J0ID4gMHhGRkZGKSByZXR1cm4gSU5WQUxJRF9QT1JUOwogICAgICAgICAgICB1cmwucG9ydCA9IGlzU3BlY2lhbCh1cmwpICYmIHBvcnQgPT09IHNwZWNpYWxTY2hlbWVzW3VybC5zY2hlbWVdID8gbnVsbCA6IHBvcnQ7CiAgICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSByZXR1cm47CiAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgcmV0dXJuIElOVkFMSURfUE9SVDsKCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIEZJTEU6CiAgICAgICAgdXJsLnNjaGVtZSA9ICdmaWxlJzsKICAgICAgICBpZiAoY2hhciA9PSAnLycgfHwgY2hhciA9PSAnXFwnKSBzdGF0ZSA9IEZJTEVfU0xBU0g7ZWxzZSBpZiAoYmFzZSAmJiBiYXNlLnNjaGVtZSA9PSAnZmlsZScpIHsKICAgICAgICAgIGlmIChjaGFyID09IEVPRikgewogICAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTsKICAgICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnPycpIHsKICAgICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7CiAgICAgICAgICAgIHVybC5wYXRoID0gYmFzZS5wYXRoLnNsaWNlKCk7CiAgICAgICAgICAgIHVybC5xdWVyeSA9ICcnOwogICAgICAgICAgICBzdGF0ZSA9IFFVRVJZOwogICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICcjJykgewogICAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTsKICAgICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXN0YXJ0c1dpdGhXaW5kb3dzRHJpdmVMZXR0ZXIoY29kZVBvaW50cy5zbGljZShwb2ludGVyKS5qb2luKCcnKSkpIHsKICAgICAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgICAgIHNob3J0ZW5VUkxzUGF0aCh1cmwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIEZJTEVfU0xBU0g6CiAgICAgICAgaWYgKGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJ1xcJykgewogICAgICAgICAgc3RhdGUgPSBGSUxFX0hPU1Q7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmIChiYXNlICYmIGJhc2Uuc2NoZW1lID09ICdmaWxlJyAmJiAhc3RhcnRzV2l0aFdpbmRvd3NEcml2ZUxldHRlcihjb2RlUG9pbnRzLnNsaWNlKHBvaW50ZXIpLmpvaW4oJycpKSkgewogICAgICAgICAgaWYgKGlzV2luZG93c0RyaXZlTGV0dGVyKGJhc2UucGF0aFswXSwgdHJ1ZSkpIHVybC5wYXRoLnB1c2goYmFzZS5wYXRoWzBdKTtlbHNlIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgIH0KCiAgICAgICAgc3RhdGUgPSBQQVRIOwogICAgICAgIGNvbnRpbnVlOwoKICAgICAgY2FzZSBGSUxFX0hPU1Q6CiAgICAgICAgaWYgKGNoYXIgPT0gRU9GIHx8IGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJ1xcJyB8fCBjaGFyID09ICc/JyB8fCBjaGFyID09ICcjJykgewogICAgICAgICAgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGlzV2luZG93c0RyaXZlTGV0dGVyKGJ1ZmZlcikpIHsKICAgICAgICAgICAgc3RhdGUgPSBQQVRIOwogICAgICAgICAgfSBlbHNlIGlmIChidWZmZXIgPT0gJycpIHsKICAgICAgICAgICAgdXJsLmhvc3QgPSAnJzsKICAgICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUpIHJldHVybjsKICAgICAgICAgICAgc3RhdGUgPSBQQVRIX1NUQVJUOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmFpbHVyZSA9IHBhcnNlSG9zdCh1cmwsIGJ1ZmZlcik7CiAgICAgICAgICAgIGlmIChmYWlsdXJlKSByZXR1cm4gZmFpbHVyZTsKICAgICAgICAgICAgaWYgKHVybC5ob3N0ID09ICdsb2NhbGhvc3QnKSB1cmwuaG9zdCA9ICcnOwogICAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSkgcmV0dXJuOwogICAgICAgICAgICBidWZmZXIgPSAnJzsKICAgICAgICAgICAgc3RhdGUgPSBQQVRIX1NUQVJUOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSBidWZmZXIgKz0gY2hhcjsKCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFBBVEhfU1RBUlQ6CiAgICAgICAgaWYgKGlzU3BlY2lhbCh1cmwpKSB7CiAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICBpZiAoY2hhciAhPSAnLycgJiYgY2hhciAhPSAnXFwnKSBjb250aW51ZTsKICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGNoYXIgPT0gJz8nKSB7CiAgICAgICAgICB1cmwucXVlcnkgPSAnJzsKICAgICAgICAgIHN0YXRlID0gUVVFUlk7CiAgICAgICAgfSBlbHNlIGlmICghc3RhdGVPdmVycmlkZSAmJiBjaGFyID09ICcjJykgewogICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciAhPSBFT0YpIHsKICAgICAgICAgIHN0YXRlID0gUEFUSDsKICAgICAgICAgIGlmIChjaGFyICE9ICcvJykgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgUEFUSDoKICAgICAgICBpZiAoY2hhciA9PSBFT0YgfHwgY2hhciA9PSAnLycgfHwgY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpIHx8ICFzdGF0ZU92ZXJyaWRlICYmIChjaGFyID09ICc/JyB8fCBjaGFyID09ICcjJykpIHsKICAgICAgICAgIGlmIChpc0RvdWJsZURvdChidWZmZXIpKSB7CiAgICAgICAgICAgIHNob3J0ZW5VUkxzUGF0aCh1cmwpOwoKICAgICAgICAgICAgaWYgKGNoYXIgIT0gJy8nICYmICEoY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpKSkgewogICAgICAgICAgICAgIHVybC5wYXRoLnB1c2goJycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGlzU2luZ2xlRG90KGJ1ZmZlcikpIHsKICAgICAgICAgICAgaWYgKGNoYXIgIT0gJy8nICYmICEoY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpKSkgewogICAgICAgICAgICAgIHVybC5wYXRoLnB1c2goJycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodXJsLnNjaGVtZSA9PSAnZmlsZScgJiYgIXVybC5wYXRoLmxlbmd0aCAmJiBpc1dpbmRvd3NEcml2ZUxldHRlcihidWZmZXIpKSB7CiAgICAgICAgICAgICAgaWYgKHVybC5ob3N0KSB1cmwuaG9zdCA9ICcnOwogICAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5jaGFyQXQoMCkgKyAnOic7IC8vIG5vcm1hbGl6ZSB3aW5kb3dzIGRyaXZlIGxldHRlcgogICAgICAgICAgICB9CgogICAgICAgICAgICB1cmwucGF0aC5wdXNoKGJ1ZmZlcik7CiAgICAgICAgICB9CgogICAgICAgICAgYnVmZmVyID0gJyc7CgogICAgICAgICAgaWYgKHVybC5zY2hlbWUgPT0gJ2ZpbGUnICYmIChjaGFyID09IEVPRiB8fCBjaGFyID09ICc/JyB8fCBjaGFyID09ICcjJykpIHsKICAgICAgICAgICAgd2hpbGUgKHVybC5wYXRoLmxlbmd0aCA+IDEgJiYgdXJsLnBhdGhbMF0gPT09ICcnKSB7CiAgICAgICAgICAgICAgdXJsLnBhdGguc2hpZnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFyID09ICc/JykgewogICAgICAgICAgICB1cmwucXVlcnkgPSAnJzsKICAgICAgICAgICAgc3RhdGUgPSBRVUVSWTsKICAgICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnIycpIHsKICAgICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ1ZmZlciArPSBwZXJjZW50RW5jb2RlKGNoYXIsIHBhdGhQZXJjZW50RW5jb2RlU2V0KTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBDQU5OT1RfQkVfQV9CQVNFX1VSTF9QQVRIOgogICAgICAgIGlmIChjaGFyID09ICc/JykgewogICAgICAgICAgdXJsLnF1ZXJ5ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IFFVRVJZOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnIycpIHsKICAgICAgICAgIHVybC5mcmFnbWVudCA9ICcnOwogICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgIT0gRU9GKSB7CiAgICAgICAgICB1cmwucGF0aFswXSArPSBwZXJjZW50RW5jb2RlKGNoYXIsIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQpOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFFVRVJZOgogICAgICAgIGlmICghc3RhdGVPdmVycmlkZSAmJiBjaGFyID09ICcjJykgewogICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciAhPSBFT0YpIHsKICAgICAgICAgIGlmIChjaGFyID09ICInIiAmJiBpc1NwZWNpYWwodXJsKSkgdXJsLnF1ZXJ5ICs9ICclMjcnO2Vsc2UgaWYgKGNoYXIgPT0gJyMnKSB1cmwucXVlcnkgKz0gJyUyMyc7ZWxzZSB1cmwucXVlcnkgKz0gcGVyY2VudEVuY29kZShjaGFyLCBDMENvbnRyb2xQZXJjZW50RW5jb2RlU2V0KTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBGUkFHTUVOVDoKICAgICAgICBpZiAoY2hhciAhPSBFT0YpIHVybC5mcmFnbWVudCArPSBwZXJjZW50RW5jb2RlKGNoYXIsIGZyYWdtZW50UGVyY2VudEVuY29kZVNldCk7CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcG9pbnRlcisrOwogIH0KfTsgLy8gYFVSTGAgY29uc3RydWN0b3IKLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmwtY2xhc3MKCgp2YXIgVVJMQ29uc3RydWN0b3IgPSBmdW5jdGlvbiBVUkwodXJsCi8qICwgYmFzZSAqLwopIHsKICB2YXIgdGhhdCA9IGFuSW5zdGFuY2UodGhpcywgVVJMQ29uc3RydWN0b3IsICdVUkwnKTsKICB2YXIgYmFzZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogIHZhciB1cmxTdHJpbmcgPSBTdHJpbmcodXJsKTsKICB2YXIgc3RhdGUgPSBzZXRJbnRlcm5hbFN0YXRlKHRoYXQsIHsKICAgIHR5cGU6ICdVUkwnCiAgfSk7CiAgdmFyIGJhc2VTdGF0ZSwgZmFpbHVyZTsKCiAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkgewogICAgaWYgKGJhc2UgaW5zdGFuY2VvZiBVUkxDb25zdHJ1Y3RvcikgYmFzZVN0YXRlID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZShiYXNlKTtlbHNlIHsKICAgICAgZmFpbHVyZSA9IHBhcnNlVVJMKGJhc2VTdGF0ZSA9IHt9LCBTdHJpbmcoYmFzZSkpOwogICAgICBpZiAoZmFpbHVyZSkgdGhyb3cgVHlwZUVycm9yKGZhaWx1cmUpOwogICAgfQogIH0KCiAgZmFpbHVyZSA9IHBhcnNlVVJMKHN0YXRlLCB1cmxTdHJpbmcsIG51bGwsIGJhc2VTdGF0ZSk7CiAgaWYgKGZhaWx1cmUpIHRocm93IFR5cGVFcnJvcihmYWlsdXJlKTsKICB2YXIgc2VhcmNoUGFyYW1zID0gc3RhdGUuc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogIHZhciBzZWFyY2hQYXJhbXNTdGF0ZSA9IGdldEludGVybmFsU2VhcmNoUGFyYW1zU3RhdGUoc2VhcmNoUGFyYW1zKTsKICBzZWFyY2hQYXJhbXNTdGF0ZS51cGRhdGVTZWFyY2hQYXJhbXMoc3RhdGUucXVlcnkpOwoKICBzZWFyY2hQYXJhbXNTdGF0ZS51cGRhdGVVUkwgPSBmdW5jdGlvbiAoKSB7CiAgICBzdGF0ZS5xdWVyeSA9IFN0cmluZyhzZWFyY2hQYXJhbXMpIHx8IG51bGw7CiAgfTsKCiAgaWYgKCFERVNDUklQVE9SUykgewogICAgdGhhdC5ocmVmID0gc2VyaWFsaXplVVJMLmNhbGwodGhhdCk7CiAgICB0aGF0Lm9yaWdpbiA9IGdldE9yaWdpbi5jYWxsKHRoYXQpOwogICAgdGhhdC5wcm90b2NvbCA9IGdldFByb3RvY29sLmNhbGwodGhhdCk7CiAgICB0aGF0LnVzZXJuYW1lID0gZ2V0VXNlcm5hbWUuY2FsbCh0aGF0KTsKICAgIHRoYXQucGFzc3dvcmQgPSBnZXRQYXNzd29yZC5jYWxsKHRoYXQpOwogICAgdGhhdC5ob3N0ID0gZ2V0SG9zdC5jYWxsKHRoYXQpOwogICAgdGhhdC5ob3N0bmFtZSA9IGdldEhvc3RuYW1lLmNhbGwodGhhdCk7CiAgICB0aGF0LnBvcnQgPSBnZXRQb3J0LmNhbGwodGhhdCk7CiAgICB0aGF0LnBhdGhuYW1lID0gZ2V0UGF0aG5hbWUuY2FsbCh0aGF0KTsKICAgIHRoYXQuc2VhcmNoID0gZ2V0U2VhcmNoLmNhbGwodGhhdCk7CiAgICB0aGF0LnNlYXJjaFBhcmFtcyA9IGdldFNlYXJjaFBhcmFtcy5jYWxsKHRoYXQpOwogICAgdGhhdC5oYXNoID0gZ2V0SGFzaC5jYWxsKHRoYXQpOwogIH0KfTsKCnZhciBVUkxQcm90b3R5cGUgPSBVUkxDb25zdHJ1Y3Rvci5wcm90b3R5cGU7Cgp2YXIgc2VyaWFsaXplVVJMID0gZnVuY3Rpb24gKCkgewogIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogIHZhciBzY2hlbWUgPSB1cmwuc2NoZW1lOwogIHZhciB1c2VybmFtZSA9IHVybC51c2VybmFtZTsKICB2YXIgcGFzc3dvcmQgPSB1cmwucGFzc3dvcmQ7CiAgdmFyIGhvc3QgPSB1cmwuaG9zdDsKICB2YXIgcG9ydCA9IHVybC5wb3J0OwogIHZhciBwYXRoID0gdXJsLnBhdGg7CiAgdmFyIHF1ZXJ5ID0gdXJsLnF1ZXJ5OwogIHZhciBmcmFnbWVudCA9IHVybC5mcmFnbWVudDsKICB2YXIgb3V0cHV0ID0gc2NoZW1lICsgJzonOwoKICBpZiAoaG9zdCAhPT0gbnVsbCkgewogICAgb3V0cHV0ICs9ICcvLyc7CgogICAgaWYgKGluY2x1ZGVzQ3JlZGVudGlhbHModXJsKSkgewogICAgICBvdXRwdXQgKz0gdXNlcm5hbWUgKyAocGFzc3dvcmQgPyAnOicgKyBwYXNzd29yZCA6ICcnKSArICdAJzsKICAgIH0KCiAgICBvdXRwdXQgKz0gc2VyaWFsaXplSG9zdChob3N0KTsKICAgIGlmIChwb3J0ICE9PSBudWxsKSBvdXRwdXQgKz0gJzonICsgcG9ydDsKICB9IGVsc2UgaWYgKHNjaGVtZSA9PSAnZmlsZScpIG91dHB1dCArPSAnLy8nOwoKICBvdXRwdXQgKz0gdXJsLmNhbm5vdEJlQUJhc2VVUkwgPyBwYXRoWzBdIDogcGF0aC5sZW5ndGggPyAnLycgKyBwYXRoLmpvaW4oJy8nKSA6ICcnOwogIGlmIChxdWVyeSAhPT0gbnVsbCkgb3V0cHV0ICs9ICc/JyArIHF1ZXJ5OwogIGlmIChmcmFnbWVudCAhPT0gbnVsbCkgb3V0cHV0ICs9ICcjJyArIGZyYWdtZW50OwogIHJldHVybiBvdXRwdXQ7Cn07Cgp2YXIgZ2V0T3JpZ2luID0gZnVuY3Rpb24gKCkgewogIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogIHZhciBzY2hlbWUgPSB1cmwuc2NoZW1lOwogIHZhciBwb3J0ID0gdXJsLnBvcnQ7CiAgaWYgKHNjaGVtZSA9PSAnYmxvYicpIHRyeSB7CiAgICByZXR1cm4gbmV3IFVSTChzY2hlbWUucGF0aFswXSkub3JpZ2luOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZXR1cm4gJ251bGwnOwogIH0KICBpZiAoc2NoZW1lID09ICdmaWxlJyB8fCAhaXNTcGVjaWFsKHVybCkpIHJldHVybiAnbnVsbCc7CiAgcmV0dXJuIHNjaGVtZSArICc6Ly8nICsgc2VyaWFsaXplSG9zdCh1cmwuaG9zdCkgKyAocG9ydCAhPT0gbnVsbCA/ICc6JyArIHBvcnQgOiAnJyk7Cn07Cgp2YXIgZ2V0UHJvdG9jb2wgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGdldEludGVybmFsVVJMU3RhdGUodGhpcykuc2NoZW1lICsgJzonOwp9OwoKdmFyIGdldFVzZXJuYW1lID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnVzZXJuYW1lOwp9OwoKdmFyIGdldFBhc3N3b3JkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnBhc3N3b3JkOwp9OwoKdmFyIGdldEhvc3QgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgdmFyIGhvc3QgPSB1cmwuaG9zdDsKICB2YXIgcG9ydCA9IHVybC5wb3J0OwogIHJldHVybiBob3N0ID09PSBudWxsID8gJycgOiBwb3J0ID09PSBudWxsID8gc2VyaWFsaXplSG9zdChob3N0KSA6IHNlcmlhbGl6ZUhvc3QoaG9zdCkgKyAnOicgKyBwb3J0Owp9OwoKdmFyIGdldEhvc3RuYW1lID0gZnVuY3Rpb24gKCkgewogIHZhciBob3N0ID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS5ob3N0OwogIHJldHVybiBob3N0ID09PSBudWxsID8gJycgOiBzZXJpYWxpemVIb3N0KGhvc3QpOwp9OwoKdmFyIGdldFBvcnQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHBvcnQgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnBvcnQ7CiAgcmV0dXJuIHBvcnQgPT09IG51bGwgPyAnJyA6IFN0cmluZyhwb3J0KTsKfTsKCnZhciBnZXRQYXRobmFtZSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICB2YXIgcGF0aCA9IHVybC5wYXRoOwogIHJldHVybiB1cmwuY2Fubm90QmVBQmFzZVVSTCA/IHBhdGhbMF0gOiBwYXRoLmxlbmd0aCA/ICcvJyArIHBhdGguam9pbignLycpIDogJyc7Cn07Cgp2YXIgZ2V0U2VhcmNoID0gZnVuY3Rpb24gKCkgewogIHZhciBxdWVyeSA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcykucXVlcnk7CiAgcmV0dXJuIHF1ZXJ5ID8gJz8nICsgcXVlcnkgOiAnJzsKfTsKCnZhciBnZXRTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGdldEludGVybmFsVVJMU3RhdGUodGhpcykuc2VhcmNoUGFyYW1zOwp9OwoKdmFyIGdldEhhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGZyYWdtZW50ID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS5mcmFnbWVudDsKICByZXR1cm4gZnJhZ21lbnQgPyAnIycgKyBmcmFnbWVudCA6ICcnOwp9OwoKdmFyIGFjY2Vzc29yRGVzY3JpcHRvciA9IGZ1bmN0aW9uIChnZXR0ZXIsIHNldHRlcikgewogIHJldHVybiB7CiAgICBnZXQ6IGdldHRlciwKICAgIHNldDogc2V0dGVyLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZW51bWVyYWJsZTogdHJ1ZQogIH07Cn07CgppZiAoREVTQ1JJUFRPUlMpIHsKICBkZWZpbmVQcm9wZXJ0aWVzKFVSTFByb3RvdHlwZSwgewogICAgLy8gYFVSTC5wcm90b3R5cGUuaHJlZmAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1ocmVmCiAgICBocmVmOiBhY2Nlc3NvckRlc2NyaXB0b3Ioc2VyaWFsaXplVVJMLCBmdW5jdGlvbiAoaHJlZikgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgdmFyIHVybFN0cmluZyA9IFN0cmluZyhocmVmKTsKICAgICAgdmFyIGZhaWx1cmUgPSBwYXJzZVVSTCh1cmwsIHVybFN0cmluZyk7CiAgICAgIGlmIChmYWlsdXJlKSB0aHJvdyBUeXBlRXJyb3IoZmFpbHVyZSk7CiAgICAgIGdldEludGVybmFsU2VhcmNoUGFyYW1zU3RhdGUodXJsLnNlYXJjaFBhcmFtcykudXBkYXRlU2VhcmNoUGFyYW1zKHVybC5xdWVyeSk7CiAgICB9KSwKICAgIC8vIGBVUkwucHJvdG90eXBlLm9yaWdpbmAgZ2V0dGVyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtb3JpZ2luCiAgICBvcmlnaW46IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRPcmlnaW4pLAogICAgLy8gYFVSTC5wcm90b3R5cGUucHJvdG9jb2xgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcHJvdG9jb2wKICAgIHByb3RvY29sOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0UHJvdG9jb2wsIGZ1bmN0aW9uIChwcm90b2NvbCkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgcGFyc2VVUkwodXJsLCBTdHJpbmcocHJvdG9jb2wpICsgJzonLCBTQ0hFTUVfU1RBUlQpOwogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS51c2VybmFtZWAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC11c2VybmFtZQogICAgdXNlcm5hbWU6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRVc2VybmFtZSwgZnVuY3Rpb24gKHVzZXJuYW1lKSB7CiAgICAgIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogICAgICB2YXIgY29kZVBvaW50cyA9IGFycmF5RnJvbShTdHJpbmcodXNlcm5hbWUpKTsKICAgICAgaWYgKGNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCh1cmwpKSByZXR1cm47CiAgICAgIHVybC51c2VybmFtZSA9ICcnOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlUG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdXJsLnVzZXJuYW1lICs9IHBlcmNlbnRFbmNvZGUoY29kZVBvaW50c1tpXSwgdXNlcmluZm9QZXJjZW50RW5jb2RlU2V0KTsKICAgICAgfQogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5wYXNzd29yZGAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1wYXNzd29yZAogICAgcGFzc3dvcmQ6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRQYXNzd29yZCwgZnVuY3Rpb24gKHBhc3N3b3JkKSB7CiAgICAgIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogICAgICB2YXIgY29kZVBvaW50cyA9IGFycmF5RnJvbShTdHJpbmcocGFzc3dvcmQpKTsKICAgICAgaWYgKGNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCh1cmwpKSByZXR1cm47CiAgICAgIHVybC5wYXNzd29yZCA9ICcnOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlUG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdXJsLnBhc3N3b3JkICs9IHBlcmNlbnRFbmNvZGUoY29kZVBvaW50c1tpXSwgdXNlcmluZm9QZXJjZW50RW5jb2RlU2V0KTsKICAgICAgfQogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5ob3N0YCBhY2Nlc3NvcnMgcGFpcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLWhvc3QKICAgIGhvc3Q6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRIb3N0LCBmdW5jdGlvbiAoaG9zdCkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgaWYgKHVybC5jYW5ub3RCZUFCYXNlVVJMKSByZXR1cm47CiAgICAgIHBhcnNlVVJMKHVybCwgU3RyaW5nKGhvc3QpLCBIT1NUKTsKICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUuaG9zdG5hbWVgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtaG9zdG5hbWUKICAgIGhvc3RuYW1lOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0SG9zdG5hbWUsIGZ1bmN0aW9uIChob3N0bmFtZSkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgaWYgKHVybC5jYW5ub3RCZUFCYXNlVVJMKSByZXR1cm47CiAgICAgIHBhcnNlVVJMKHVybCwgU3RyaW5nKGhvc3RuYW1lKSwgSE9TVE5BTUUpOwogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5wb3J0YCBhY2Nlc3NvcnMgcGFpcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXBvcnQKICAgIHBvcnQ6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRQb3J0LCBmdW5jdGlvbiAocG9ydCkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgaWYgKGNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCh1cmwpKSByZXR1cm47CiAgICAgIHBvcnQgPSBTdHJpbmcocG9ydCk7CiAgICAgIGlmIChwb3J0ID09ICcnKSB1cmwucG9ydCA9IG51bGw7ZWxzZSBwYXJzZVVSTCh1cmwsIHBvcnQsIFBPUlQpOwogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5wYXRobmFtZWAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1wYXRobmFtZQogICAgcGF0aG5hbWU6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRQYXRobmFtZSwgZnVuY3Rpb24gKHBhdGhuYW1lKSB7CiAgICAgIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogICAgICBpZiAodXJsLmNhbm5vdEJlQUJhc2VVUkwpIHJldHVybjsKICAgICAgdXJsLnBhdGggPSBbXTsKICAgICAgcGFyc2VVUkwodXJsLCBwYXRobmFtZSArICcnLCBQQVRIX1NUQVJUKTsKICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUuc2VhcmNoYCBhY2Nlc3NvcnMgcGFpcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXNlYXJjaAogICAgc2VhcmNoOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0U2VhcmNoLCBmdW5jdGlvbiAoc2VhcmNoKSB7CiAgICAgIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogICAgICBzZWFyY2ggPSBTdHJpbmcoc2VhcmNoKTsKCiAgICAgIGlmIChzZWFyY2ggPT0gJycpIHsKICAgICAgICB1cmwucXVlcnkgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICgnPycgPT0gc2VhcmNoLmNoYXJBdCgwKSkgc2VhcmNoID0gc2VhcmNoLnNsaWNlKDEpOwogICAgICAgIHVybC5xdWVyeSA9ICcnOwogICAgICAgIHBhcnNlVVJMKHVybCwgc2VhcmNoLCBRVUVSWSk7CiAgICAgIH0KCiAgICAgIGdldEludGVybmFsU2VhcmNoUGFyYW1zU3RhdGUodXJsLnNlYXJjaFBhcmFtcykudXBkYXRlU2VhcmNoUGFyYW1zKHVybC5xdWVyeSk7CiAgICB9KSwKICAgIC8vIGBVUkwucHJvdG90eXBlLnNlYXJjaFBhcmFtc2AgZ2V0dGVyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtc2VhcmNocGFyYW1zCiAgICBzZWFyY2hQYXJhbXM6IGFjY2Vzc29yRGVzY3JpcHRvcihnZXRTZWFyY2hQYXJhbXMpLAogICAgLy8gYFVSTC5wcm90b3R5cGUuaGFzaGAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1oYXNoCiAgICBoYXNoOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0SGFzaCwgZnVuY3Rpb24gKGhhc2gpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIGhhc2ggPSBTdHJpbmcoaGFzaCk7CgogICAgICBpZiAoaGFzaCA9PSAnJykgewogICAgICAgIHVybC5mcmFnbWVudCA9IG51bGw7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoJyMnID09IGhhc2guY2hhckF0KDApKSBoYXNoID0gaGFzaC5zbGljZSgxKTsKICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgIHBhcnNlVVJMKHVybCwgaGFzaCwgRlJBR01FTlQpOwogICAgfSkKICB9KTsKfSAvLyBgVVJMLnByb3RvdHlwZS50b0pTT05gIG1ldGhvZAovLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtdG9qc29uCgoKcmVkZWZpbmUoVVJMUHJvdG90eXBlLCAndG9KU09OJywgZnVuY3Rpb24gdG9KU09OKCkgewogIHJldHVybiBzZXJpYWxpemVVUkwuY2FsbCh0aGlzKTsKfSwgewogIGVudW1lcmFibGU6IHRydWUKfSk7IC8vIGBVUkwucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2QKLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNVUkwtc3RyaW5naWZpY2F0aW9uLWJlaGF2aW9yCgpyZWRlZmluZShVUkxQcm90b3R5cGUsICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogIHJldHVybiBzZXJpYWxpemVVUkwuY2FsbCh0aGlzKTsKfSwgewogIGVudW1lcmFibGU6IHRydWUKfSk7CgppZiAoTmF0aXZlVVJMKSB7CiAgdmFyIG5hdGl2ZUNyZWF0ZU9iamVjdFVSTCA9IE5hdGl2ZVVSTC5jcmVhdGVPYmplY3RVUkw7CiAgdmFyIG5hdGl2ZVJldm9rZU9iamVjdFVSTCA9IE5hdGl2ZVVSTC5yZXZva2VPYmplY3RVUkw7IC8vIGBVUkwuY3JlYXRlT2JqZWN0VVJMYCBtZXRob2QKICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVVJML2NyZWF0ZU9iamVjdFVSTAogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwoKICBpZiAobmF0aXZlQ3JlYXRlT2JqZWN0VVJMKSByZWRlZmluZShVUkxDb25zdHJ1Y3RvciwgJ2NyZWF0ZU9iamVjdFVSTCcsIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdFVSTChibG9iKSB7CiAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMLmFwcGx5KE5hdGl2ZVVSTCwgYXJndW1lbnRzKTsKICB9KTsgLy8gYFVSTC5yZXZva2VPYmplY3RVUkxgIG1ldGhvZAogIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9VUkwvcmV2b2tlT2JqZWN0VVJMCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCgogIGlmIChuYXRpdmVSZXZva2VPYmplY3RVUkwpIHJlZGVmaW5lKFVSTENvbnN0cnVjdG9yLCAncmV2b2tlT2JqZWN0VVJMJywgZnVuY3Rpb24gcmV2b2tlT2JqZWN0VVJMKHVybCkgewogICAgcmV0dXJuIG5hdGl2ZVJldm9rZU9iamVjdFVSTC5hcHBseShOYXRpdmVVUkwsIGFyZ3VtZW50cyk7CiAgfSk7Cn0KCnNldFRvU3RyaW5nVGFnKFVSTENvbnN0cnVjdG9yLCAnVVJMJyk7CiQoewogIGdsb2JhbDogdHJ1ZSwKICBmb3JjZWQ6ICFVU0VfTkFUSVZFX1VSTCwKICBzaGFtOiAhREVTQ1JJUFRPUlMKfSwgewogIFVSTDogVVJMQ29uc3RydWN0b3IKfSk7"},null]}