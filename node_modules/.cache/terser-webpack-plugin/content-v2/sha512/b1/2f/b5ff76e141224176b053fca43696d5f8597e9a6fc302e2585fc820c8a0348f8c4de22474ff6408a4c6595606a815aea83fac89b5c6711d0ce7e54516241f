{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{583:function(e,v,s){\"use strict\";s.r(v);var t=s(23),_=Object(t.a)({},(function(){var e=this,v=e.$createElement,s=e._self._c||v;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h2\",{attrs:{id:\"一、screen-r-stack不成功\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、screen-r-stack不成功\"}},[e._v(\"#\")]),e._v(\" 一、\"),s(\"code\",[e._v(\"screen -r stack\")]),e._v(\"不成功\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"http://i.imgur.com/iNRBxiv.jpg\",alt:\"\"}}),e._v(\"\\nscreen -list：查看当前用户开启的所有screen\\n此时看到已经有个screen开着，stack正在连接使用，所以此时再用screen -r stack连接，就会\\n\"),s(\"code\",[e._v(\"There is no screen to be resumed matching stack\")])]),e._v(\" \"),s(\"p\",[e._v(\"此时需要先将已经连接的screen detach掉。执行：\"),s(\"code\",[e._v(\"screen -d stack\")]),e._v(\"。即可切断原有连接。\\n再次执行\"),s(\"code\",[e._v(\"screen -r stack\")]),e._v(\"，就能连接上了。报错：\")]),e._v(\" \"),s(\"p\",[e._v(\"##二、在screen视图下切换窗口\\n移到下一个window：\"),s(\"code\",[e._v(\"CRTL + A + n\")])]),e._v(\" \"),s(\"p\",[e._v(\"移到前一个window：\"),s(\"code\",[e._v(\"CRTL + A + p\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"三、screen-cannot-open-your-terminal-dev-pts-1-问题\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、screen-cannot-open-your-terminal-dev-pts-1-问题\"}},[e._v(\"#\")]),e._v(\" 三、screen Cannot open your terminal '/dev/pts/1'问题\")]),e._v(\" \"),s(\"p\",[e._v(\"如下内容转自：http://blog.sina.com.cn/s/blog_704836f401010osn.html\")]),e._v(\" \"),s(\"p\",[e._v(\"问题描述:\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"userA\")]),e._v(\"首先登录系统，使用\"),s(\"code\",[e._v(\"screen\")]),e._v(\"开启了一个\"),s(\"code\",[e._v(\"session\")]),e._v(\"，然后\"),s(\"code\",[e._v(\"detach\")]),e._v(\"这个窗口。\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"userB\")]),e._v(\"然后登录系统，通过\"),s(\"code\",[e._v(\"su - userA\")]),e._v(\" 变成\"),s(\"code\",[e._v(\"userA\")]),e._v(\"，然后使用\"),s(\"code\",[e._v(\"screen -r\")]),e._v(\" 恢复之前\"),s(\"code\",[e._v(\"detached\")]),e._v(\"窗口，这时系统报如下错误:\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"*Cannot open your terminal '/dev/pts/1' - please check.*\")])]),e._v(\" \"),s(\"p\",[e._v(\"解决方法:\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"userB\")]),e._v(\"在\"),s(\"code\",[e._v(\"su - userA\")]),e._v(\"以后，执行如下命令即可:\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"script /dev/null\")])]),e._v(\" \"),s(\"p\",[e._v(\"注意: 有人提到 \"),s(\"code\",[e._v(\"chmod 777 /dev/pts/1\")]),e._v(\"，这么干的人真是误人子弟，虽然这么做的确能解决这个问题，但是会带来极大的安全问题！！！\")]),e._v(\" \"),s(\"p\",[e._v(\"为什么这条命令能解决问题?\")]),e._v(\" \"),s(\"p\",[e._v(\"一般人看到上面这里估计就马上回去试验了，但是，等等，你不想知道为什么这个命令会有作用吗？它是怎么起作用的呢？\")]),e._v(\" \"),s(\"p\",[e._v(\"我们来过一遍整个的操作步骤:\")]),e._v(\" \"),s(\"p\",[e._v(\"首先，\"),s(\"code\",[e._v(\"usera\")]),e._v(\"登录到系统中，我们使用tty命令查看一下分配给他的\"),s(\"code\",[e._v(\"tty\")]),e._v(\"，然后看一下这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"的权限，然后用户执行\"),s(\"code\",[e._v(\"screen\")]),e._v(\"命令。\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",[s(\"code\",[e._v(\"usera@localhost ~ $ ssh usera@remotehost\\nusera@remotehost ~ $ tty\\n/dev/pts/1\\nusera@remotehost ~ $ ls -l /dev/pts/1\\ncrw--w---- 1 usera tty 136, 1 2011-01-09 20:14 /dev/pts/1\\nusera@remotehost ~ $ screen\\n\")])])]),s(\"p\",[e._v(\"我们观察上边的输出，发现\"),s(\"code\",[e._v(\"usera\")]),e._v(\"对于\"),s(\"code\",[e._v(\"/dev/pts/1\")]),e._v(\"具有读写权限，它所在组成员对这个tty具有写权限，其他用户不能访问这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"。\")]),e._v(\" \"),s(\"p\",[e._v(\"然后，userb也登录到系统中，同样我们使用tty命令查看一下分配给他的tty，然后看一下这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"的权限\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",[s(\"code\",[e._v(\"userb@localhost ~ $ ssh userb@remotehost\\nuserb@remotehost ~ $ tty\\n/dev/pts/2\\nuserb@remotehost ~ $ ls -l /dev/pts/2\\ncrw--w---- 1 userb tty 136, 2 2011-01-09 20:20 /dev/pts/2\\n\")])])]),s(\"p\",[e._v(\"观察输出，userb被分配了\"),s(\"code\",[e._v(\"/dev/pts/2\")]),e._v(\"，也是对于\"),s(\"code\",[e._v(\"/dev/pts/2\")]),e._v(\"具有读写权限，它所在组成员对这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"具有写权限，其他用户不能访问这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"。\")]),e._v(\" \"),s(\"p\",[e._v(\"然后\"),s(\"code\",[e._v(\"userb\")]),e._v(\"通过\"),s(\"code\",[e._v(\"su - usera\")]),e._v(\"命令变成\"),s(\"code\",[e._v(\"usera\")]),e._v(\"，同样我们使用\"),s(\"code\",[e._v(\"tty\")]),e._v(\"命令查看一下分配给他的\"),s(\"code\",[e._v(\"tty\")]),e._v(\"，然后看一下这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"的权限\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",[s(\"code\",[e._v(\"userb@remotehost ~ $ sudo su - usera\\n[sudo] password for userb:\\nusera@remotehost ~ $ tty\\n/dev/pts/2\\nusera@remotehost ~ $ ls -l /dev/pts/2\\ncrw--w---- 1 userb tty 136, 2 2011-01-09 20:20 /dev/pts/2\\n\")])])]),s(\"p\",[e._v(\"AHA!!  注意了，我们看到虽然\"),s(\"code\",[e._v(\"userb\")]),e._v(\"已经变成了\"),s(\"code\",[e._v(\"usera\")]),e._v(\"，但是他所使用的\"),s(\"code\",[e._v(\"tty\")]),e._v(\"并没有改变，仍然是\"),s(\"code\",[e._v(\"/dev/pts/2\")]),e._v(\"。这就是为什么执行\"),s(\"code\",[e._v(\"screen\")]),e._v(\"命令会报错的原因了，因为所有命令此时是使用\"),s(\"code\",[e._v(\"usera\")]),e._v(\"帐户执行的，但是\"),s(\"code\",[e._v(\"/dev/pts/2\")]),e._v(\"的读写权限属于\"),s(\"code\",[e._v(\"userb\")]),e._v(\"，所以所有试图控制\"),s(\"code\",[e._v(\"/dev/pts/2\")]),e._v(\"的访问都被拒绝了！\")]),e._v(\" \"),s(\"p\",[e._v(\"那么我们接下来看一下 \"),s(\"code\",[e._v(\"script /dev/null\")]),e._v(\"做了些什么，使得\"),s(\"code\",[e._v(\"screen\")]),e._v(\"命令能执行呢？\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",[s(\"code\",[e._v(\"usera@remotehost ~ $ script /dev/null\\nScript started, file is /dev/null\\nusera@remotehost ~ $ tty\\n/dev/pts/3\\nusera@remotehost ~ $ ls -l /dev/pts/3\\ncrw--w---- 1 usera tty 136, 3 2011-01-09 20:36 /dev/pts/3\\n\")])])]),s(\"p\",[e._v(\"AHA!!! 看到了吗？我们实际上是得到了一个新的\"),s(\"code\",[e._v(\"tty ---\\x3e /dev/pts/3\")]),e._v(\"，因此\"),s(\"code\",[e._v(\"screen\")]),e._v(\"命令能够执行了，因为\"),s(\"code\",[e._v(\"/dev/pts/3\")]),e._v(\"这个\"),s(\"code\",[e._v(\"tty\")]),e._v(\"的所有者是\"),s(\"code\",[e._v(\"usera\")]),e._v(\"！\")])])}),[],!1,null,null,null);v.default=_.exports}}]);","extractedComments":[]}